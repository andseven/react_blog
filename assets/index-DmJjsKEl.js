import{aw as oe,R as ie,r as o,a6 as ae,g as ce,m as le,F as de,u as ue,d as pe,C as W,O as ve,L as D,c as A,t as fe,B as ge,a3 as me,ax as he,ao as Se,ay as xe}from"./index-9jiko7gg.js";const be=(e,t)=>{typeof e?.addEventListener<"u"?e.addEventListener("change",t):typeof e?.addListener<"u"&&e.addListener(t)},ye=(e,t)=>{typeof e?.removeEventListener<"u"?e.removeEventListener("change",t):typeof e?.removeListener<"u"&&e.removeListener(t)},Q=["xxl","xl","lg","md","sm","xs"],Ce=e=>({xs:`(max-width: ${e.screenXSMax}px)`,sm:`(min-width: ${e.screenSM}px)`,md:`(min-width: ${e.screenMD}px)`,lg:`(min-width: ${e.screenLG}px)`,xl:`(min-width: ${e.screenXL}px)`,xxl:`(min-width: ${e.screenXXL}px)`}),ze=e=>{const t=e,n=[].concat(Q).reverse();return n.forEach((r,s)=>{const i=r.toUpperCase(),a=`screen${i}Min`,l=`screen${i}`;if(!(t[a]<=t[l]))throw new Error(`${a}<=${l} fails : !(${t[a]}<=${t[l]})`);if(s<n.length-1){const d=`screen${i}Max`;if(!(t[l]<=t[d]))throw new Error(`${l}<=${d} fails : !(${t[l]}<=${t[d]})`);const f=`screen${n[s+1].toUpperCase()}Min`;if(!(t[d]<=t[f]))throw new Error(`${d}<=${f} fails : !(${t[d]}<=${t[f]})`)}}),e},$e=()=>{const[,e]=oe(),t=Ce(ze(e));return ie.useMemo(()=>{const n=new Map;let r=-1,s={};return{responsiveMap:t,matchHandlers:{},dispatch(i){return s=i,n.forEach(a=>a(s)),n.size>=1},subscribe(i){return n.size||this.register(),r+=1,n.set(r,i),i(s),r},unsubscribe(i){n.delete(i),n.size||this.unregister()},register(){Object.entries(t).forEach(([i,a])=>{const l=({matches:m})=>{this.dispatch(Object.assign(Object.assign({},s),{[i]:m}))},d=window.matchMedia(a);be(d,l),this.matchHandlers[a]={mql:d,listener:l},l(d)})},unregister(){Object.values(t).forEach(i=>{const a=this.matchHandlers[i];ye(a?.mql,a?.listener)}),n.clear()}}},[e])};function Ee(){const[,e]=o.useReducer(t=>t+1,0);return e}function Oe(e=!0,t={}){const n=o.useRef(t),r=Ee(),s=$e();return ae(()=>{const i=s.subscribe(a=>{n.current=a,e&&r()});return()=>s.unsubscribe(i)},[]),n.current}const H=o.createContext({}),we=e=>{const{antCls:t,componentCls:n,iconCls:r,avatarBg:s,avatarColor:i,containerSize:a,containerSizeLG:l,containerSizeSM:d,textFontSize:m,textFontSizeLG:f,textFontSizeSM:N,iconFontSize:k,iconFontSizeLG:b,iconFontSizeSM:R,borderRadius:y,borderRadiusLG:z,borderRadiusSM:B,lineWidth:c,lineType:C}=e,x=($,E,j,O)=>({width:$,height:$,borderRadius:"50%",fontSize:E,[`&${n}-square`]:{borderRadius:O},[`&${n}-icon`]:{fontSize:j,[`> ${r}`]:{margin:0}}});return{[n]:Object.assign(Object.assign(Object.assign(Object.assign({},de(e)),{position:"relative",display:"inline-flex",justifyContent:"center",alignItems:"center",overflow:"hidden",color:i,whiteSpace:"nowrap",textAlign:"center",verticalAlign:"middle",background:s,border:`${ue(c)} ${C} transparent`,"&-image":{background:"transparent"},[`${t}-image-img`]:{display:"block"}}),x(a,m,k,y)),{"&-lg":Object.assign({},x(l,f,b,z)),"&-sm":Object.assign({},x(d,N,R,B)),"> img":{display:"block",width:"100%",height:"100%",objectFit:"cover"}})}},Me=e=>{const{componentCls:t,groupBorderColor:n,groupOverlapping:r,groupSpace:s}=e;return{[`${t}-group`]:{display:"inline-flex",[t]:{borderColor:n},"> *:not(:first-child)":{marginInlineStart:r}},[`${t}-group-popover`]:{[`${t} + ${t}`]:{marginInlineStart:s}}}},Re=e=>{const{controlHeight:t,controlHeightLG:n,controlHeightSM:r,fontSize:s,fontSizeLG:i,fontSizeXL:a,fontSizeHeading3:l,marginXS:d,marginXXS:m,colorBorderBg:f}=e;return{containerSize:t,containerSizeLG:n,containerSizeSM:r,textFontSize:s,textFontSizeLG:s,textFontSizeSM:s,iconFontSize:Math.round((i+a)/2),iconFontSizeLG:l,iconFontSizeSM:s,groupSpace:m,groupOverlapping:-d,groupBorderColor:f}},J=ce("Avatar",e=>{const{colorTextLightSolid:t,colorTextPlaceholder:n}=e,r=le(e,{avatarBg:n,avatarColor:t});return[we(r),Me(r)]},Re);var je=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var s=0,r=Object.getOwnPropertySymbols(e);s<r.length;s++)t.indexOf(r[s])<0&&Object.prototype.propertyIsEnumerable.call(e,r[s])&&(n[r[s]]=e[r[s]]);return n};const K=o.forwardRef((e,t)=>{const{prefixCls:n,shape:r,size:s,src:i,srcSet:a,icon:l,className:d,rootClassName:m,style:f,alt:N,draggable:k,children:b,crossOrigin:R,gap:y=4,onError:z}=e,B=je(e,["prefixCls","shape","size","src","srcSet","icon","className","rootClassName","style","alt","draggable","children","crossOrigin","gap","onError"]),[c,C]=o.useState(1),[x,$]=o.useState(!1),[E,j]=o.useState(!0),O=o.useRef(null),w=o.useRef(null),L=pe(t,O),{getPrefixCls:M,avatar:h}=o.useContext(W),g=o.useContext(H),P=()=>{if(!w.current||!O.current)return;const p=w.current.offsetWidth,u=O.current.offsetWidth;p!==0&&u!==0&&y*2<u&&C(u-y*2<p?(u-y*2)/p:1)};o.useEffect(()=>{$(!0)},[]),o.useEffect(()=>{j(!0),C(1)},[i]),o.useEffect(P,[y]);const I=()=>{z?.()!==!1&&j(!1)},v=ve(p=>{var u,G;return(G=(u=s??g?.size)!==null&&u!==void 0?u:p)!==null&&G!==void 0?G:"default"}),_=Object.keys(typeof v=="object"?v||{}:{}).some(p=>["xs","sm","md","lg","xl","xxl"].includes(p)),T=Oe(_),Y=o.useMemo(()=>{if(typeof v!="object")return{};const p=Q.find(G=>T[G]),u=v[p];return u?{width:u,height:u,fontSize:u&&(l||b)?u/2:18}:{}},[T,v]),S=M("avatar",n),U=D(S),[Z,q,ee]=J(S,U),te=A({[`${S}-lg`]:v==="large",[`${S}-sm`]:v==="small"}),X=o.isValidElement(i),ne=r||g?.shape||"circle",re=A(S,te,h?.className,`${S}-${ne}`,{[`${S}-image`]:X||i&&E,[`${S}-icon`]:!!l},ee,U,d,m,q),se=typeof v=="number"?{width:v,height:v,fontSize:l?v/2:18}:{};let F;if(typeof i=="string"&&E)F=o.createElement("img",{src:i,draggable:k,srcSet:a,onError:I,alt:N,crossOrigin:R});else if(X)F=i;else if(l)F=l;else if(x||c!==1){const p=`scale(${c})`,u={msTransform:p,WebkitTransform:p,transform:p};F=o.createElement(fe,{onResize:P},o.createElement("span",{className:`${S}-string`,ref:w,style:Object.assign({},u)},b))}else F=o.createElement("span",{className:`${S}-string`,style:{opacity:0},ref:w},b);return Z(o.createElement("span",Object.assign({},B,{style:Object.assign(Object.assign(Object.assign(Object.assign({},se),Y),h?.style),f),className:re,ref:L}),F))}),V=e=>{const{size:t,shape:n}=o.useContext(H),r=o.useMemo(()=>({size:e.size||t,shape:e.shape||n}),[e.size,e.shape,t,n]);return o.createElement(H.Provider,{value:r},e.children)},Le=e=>{var t,n,r,s;const{getPrefixCls:i,direction:a}=o.useContext(W),{prefixCls:l,className:d,rootClassName:m,style:f,maxCount:N,maxStyle:k,size:b,shape:R,maxPopoverPlacement:y,maxPopoverTrigger:z,children:B,max:c}=e,C=i("avatar",l),x=`${C}-group`,$=D(C),[E,j,O]=J(C,$),w=A(x,{[`${x}-rtl`]:a==="rtl"},O,$,d,m,j),L=ge(B).map((g,P)=>me(g,{key:`avatar-key-${P}`})),M=c?.count||N,h=L.length;if(M&&M<h){const g=L.slice(0,M),P=L.slice(M,h),I=c?.style||k,v=((t=c?.popover)===null||t===void 0?void 0:t.trigger)||z||"hover",_=((n=c?.popover)===null||n===void 0?void 0:n.placement)||y||"top",T=Object.assign(Object.assign({content:P},c?.popover),{classNames:{root:A(`${x}-popover`,(s=(r=c?.popover)===null||r===void 0?void 0:r.classNames)===null||s===void 0?void 0:s.root)},placement:_,trigger:v});return g.push(o.createElement(he,Object.assign({key:"avatar-popover-key",destroyOnHidden:!0},T),o.createElement(K,{style:I},`+${h-M}`))),E(o.createElement(V,{shape:R,size:b},o.createElement("div",{className:w,style:f},g)))}return E(o.createElement(V,{shape:R,size:b},o.createElement("div",{className:w,style:f},L)))},Pe=K;Pe.Group=Le;Se(function(e,t){t._reactRoot||(t._reactRoot=xe.createRoot(t));var n=t._reactRoot;return n.render(e),function(){return new Promise(function(r){setTimeout(function(){n.unmount(),r()},0)})}});export{Pe as A};
